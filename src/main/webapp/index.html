<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Pahana Edu Bookshop - Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css"
          rel="stylesheet"/>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="assets/css/style.css">

</head>
<body class="container-fluid">
<div class="row">

    <!--     topbar and side navigation-->
    <nav class="col-md-2 d-none d-md-block bg-dark sidebar vh-100">
        <div class="position-sticky pt-3 d-flex flex-column h-100">
            <div>
                <h5 class="text-white text-center py-3">üìö Pahana Edu</h5>
                <div class="text-center text-white mb-3">
                    <small>Welcome, <span id="usernameDisplay">Admin</span></small>
                </div>
                <ul class="nav flex-column">
                    <li><a href="#" id="manage-dashboard-tab"><i class="bi bi-house-door-fill me-2"></i>Dashboard</a>
                    </li>
                    <li><a href="#" id="manage-customers-tab"><i class="bi bi-person-lines-fill me-2"></i>Manage
                        Customers</a></li>
                    <li><a href="#" id="manage-items-tab"><i class="bi bi-box-seam me-2"></i>Manage Items</a></li>
                    <li><a href="#" id="manage-orders-tab"><i class="bi bi-receipt me-2"></i>Manage Orders</a></li>
                    <li><a href="#" id="place-order-tab"><i class="bi bi-credit-card-2-front-fill me-2"></i>Place Order</a>
                    </li>
                    <li><a href="#" id="reports-tab"><i class="bi bi-graph-up me-2"></i>Reports</a></li>
                    <li><a href="#" id="help-section-tab"><i class="bi bi-question-circle-fill me-2"></i>Help</a></li>
                    <li><a href="#" id="user-logout-tab"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
                </ul>
            </div>
            <div class="mt-auto pb-3 text-center">
                <small class="text-info" style="font-size: 0.7rem;">
                    ¬© 2025 Designed and Developed by Dasindu Hewagamage.
                </small>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <div class="col-md-10 px-md-4 py-4">

        <!-- Dashboard Section -->
        <div id="dashboard-content" class="mt-4">
            <h2><i class="bi bi-speedometer2 me-2"></i>Dashboard Overview</h2>

            <!-- Key Metrics Cards -->
            <div class="row g-4 mt-3">
                <div class="col-md-3">
                    <div class="card border-success">
                        <div class="card-body text-center">
                            <i class="bi bi-people-fill text-success" style="font-size: 2rem;"></i>
                            <h5 class="card-title mt-2">Total Customers</h5>
                            <p class="card-text display-6 text-success" id="totalCustomers">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card border-primary">
                        <div class="card-body text-center">
                            <i class="bi bi-cart-fill text-primary" style="font-size: 2rem;"></i>
                            <h5 class="card-title mt-2">Total Orders</h5>
                            <p class="card-text display-6 text-primary" id="totalOrders">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card border-warning">
                        <div class="card-body text-center">
                            <i class="bi bi-clock-fill text-warning" style="font-size: 2rem;"></i>
                            <h5 class="card-title mt-2">Pending Orders</h5>
                            <p class="card-text display-6 text-warning" id="pendingOrders">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card border-info">
                        <div class="card-body text-center">
                            <i class="bi bi-currency-dollar text-info" style="font-size: 2rem;"></i>
                            <h5 class="card-title mt-2">Total Revenue</h5>
                            <p class="card-text display-6 text-info" id="totalRevenue">Rs. 0</p>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Most Visited Customers & Top Items -->
            <div class="row g-4 mt-4">
                <!-- Most Visited Customers -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-secondary text-white">
                            <i class="bi bi-people-fill me-2"></i>Most Visited Customers
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <thead>
                                    <tr>
                                        <th>Rank</th>
                                        <th>Customer</th>
                                        <th>Orders</th>
                                        <th>Total Spent</th>
                                    </tr>
                                    </thead>
                                    <tbody id="recentOrdersTable">
                                    <tr>
                                        <td colspan="4" class="text-center">Loading...</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Top Items -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-info text-white">
                            <i class="bi bi-trophy-fill me-2"></i>Top Selling Items
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <thead>
                                    <tr>
                                        <th>Rank & Item</th>
                                        <th>Sales</th>
                                        <th>Revenue</th>
                                    </tr>
                                    </thead>
                                    <tbody id="topItemsTable">
                                    <tr>
                                        <td colspan="3" class="text-center">Loading...</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Customer Section -->
        <div id="customer-content" class="mt-4">
            <h2 class="mb-4">üë§ Customer Management</h2>

            <!-- Add New Customer -->
            <div class="card mb-4">
                <div id="add-new-customer-form-header" class="card-header bg-primary text-white">Add New Customer</div>
                <div class="card-body">
                    <form id="addCustomerForm">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label for="customer-account-number" class="form-label">Account Number</label>
                                <input type="text" name="account_number" id="customer-account-number"
                                       class="form-control" readonly required>
                            </div>
                            <div class="col-md-3">
                                <label for="customer-name" class="form-label">Name</label>
                                <input type="text" name="name" id="customer-name" class="form-control" required>
                            </div>
                            <div class="col-md-3">
                                <label for="customer-address" class="form-label">Address</label>
                                <input type="text" name="address" id="customer-address" class="form-control" required>
                            </div>
                            <div class="col-md-3">
                                <label for="customer-telephone" class="form-label">Telephone</label>
                                <input type="text" name="telephone" id="customer-telephone" class="form-control"
                                       required>
                            </div>
                            <input type="hidden" id="customer-status" name="status"/>
                        </div>
                        <div class="mt-3 text-end">
                            <button type="submit" id="btn-create-customer" class="btn btn-success me-2">Add Customer
                            </button>
                            <button type="reset" id="btn-reset-customer-form" class="btn btn-outline-secondary">Reset
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Customer Table -->
            <div class="card">
                <div class="card-header bg-secondary text-white">
                    <i class="bi bi-list-ul me-2"></i>Customer List
                </div>
                <div class="card-body">
                    <!-- filters -->
                    <div class="row g-3 mb-3">
                        <div class="col-md-3">
                            <input type="text" id="searchCustomerAccountNumber" class="form-control"
                                   placeholder="Search by Account Number">
                        </div>
                        <div class="col-md-3">
                            <input type="text" id="searchCustomerName" class="form-control"
                                   placeholder="Search by Name">
                        </div>
                        <div class="col-md-3">
                            <input type="text" id="searchCustomerAddress" class="form-control"
                                   placeholder="Search by Address">
                        </div>
                        <div class="col-md-3">
                            <input type="text" id="searchCustomerTelephone" class="form-control"
                                   placeholder="Search by Telephone">
                        </div>
                        <div class="col-md-3 d-flex align-items-end">
                            <button id="btn-customer-reset-filters" class="btn btn-outline-secondary w-100">Reset
                                Filters
                            </button>
                        </div>
                    </div>

                    <div class="customers-table-container">
                        <table class="table table-bordered table-hover table-striped">
                            <thead class="table-dark">
                            <tr>
                                <th>Account Number</th>
                                <th>Name</th>
                                <th>Address</th>
                                <th>Telephone</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody id="customerTableBody">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Item Section -->
        <div id="item-content" class="mt-4">
            <h2 class="mb-4">üì¶ Item Management</h2>

            <!-- Add New Item -->
            <div class="card mb-4">
                <div id="add-new-item-form-header" class="card-header bg-primary text-white">Add New Item</div>
                <div class="card-body">
                    <form id="addItemForm">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label for="item-code" class="form-label">Item Code</label>
                                <input type="text" name="item_code" id="item-code"
                                       class="form-control" readonly required>
                            </div>
                            <div class="col-md-3">
                                <label for="item_name" class="form-label">Name</label>
                                <input type="text" name="name" id="item_name" class="form-control" required>
                            </div>
                            <div class="col-md-3">
                                <label for="item_unit_price" class="form-label">Unit Price</label>
                                <input type="text" name="unit_price" id="item_unit_price" class="form-control" required>
                            </div>
                            <div class="col-md-3">
                                <label for="item_qty_on_hand" class="form-label">Qty On Hand</label>
                                <input type="text" name="qty_on_hand" id="item_qty_on_hand" class="form-control"
                                       required>
                            </div>
                            <input type="hidden" id="item-status" name="status"/>
                        </div>
                        <div class="mt-3 text-end">
                            <button type="submit" id="btn-create-item" class="btn btn-success me-2">Add Item</button>
                            <button type="reset" id="btn-reset-item-form" class="btn btn-outline-secondary">Reset
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Item Table -->
            <div class="card">
                <div class="card-header bg-secondary text-white">
                    <i class="bi bi-list-ul me-2"></i>Item List
                </div>
                <div class="card-body">
                    <!-- filters -->
                    <div class="row g-3 mb-3">
                        <div class="col-md-3">
                            <input type="text" id="searchItemCode" class="form-control"
                                   placeholder="Search by Item Code">
                        </div>
                        <div class="col-md-3">
                            <input type="text" id="searchItemName" class="form-control" placeholder="Search by Name">
                        </div>
                        <div class="col-md-3">
                            <input type="text" id="searchItemUnitPrice" class="form-control"
                                   placeholder="Search by Unit Price">
                        </div>
                        <div class="col-md-3">
                            <input type="text" id="searchItemQtyOnHand" class="form-control"
                                   placeholder="Search by Qty On Hand">
                        </div>
                        <div class="col-md-3 d-flex align-items-end">
                            <button id="btn-reset-item-filters" class="btn btn-outline-secondary w-100">Reset Filters
                            </button>
                        </div>
                    </div>

                    <div class="items-table-container">
                        <table class="table table-bordered table-hover table-striped">
                            <thead class="table-dark">
                            <tr>
                                <th>Item Code</th>
                                <th>Name</th>
                                <th>Unit Price</th>
                                <th>Qty On Hand</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody id="itemTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Place Order Section -->
        <div id="place-order-content" class="mt-4">
            <h2 class="mb-4"><i class="bi bi-bag-check-fill me-2"></i>Place Order</h2>

            <div class="row g-4">
                <!-- Customer Selection -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <i class="bi bi-person-fill me-2"></i>Select Customer
                        </div>
                        <div class="card-body">
                            <label for="selectCustomer" class="form-label">Customer</label>
                            <select id="selectCustomer" class="form-control select2">
                                <!--                                <option value="">Search Customer...</option>-->
                                <option></option>
                                <!-- data will be dynamically populated here...-->
                            </select>
                            <div class="mt-3" id="customerDetails" style="display:none;">
                                <p><strong>Account No:</strong> <span id="custAcc"></span></p>
                                <p><strong>Name:</strong> <span id="custName"></span></p>
                                <p><strong>Address:</strong> <span id="custAddress"></span></p>
                                <p><strong>Telephone:</strong> <span id="custPhone"></span></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Item Selection -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-success text-white">
                            <i class="bi bi-box-seam me-2"></i>Select Item
                        </div>
                        <div class="card-body">
                            <label for="selectItem" class="form-label">Item</label>
                            <select id="selectItem" class="form-control select2">
                                <!--                                <option value="">Search Item...</option>-->
                                <option></option>
                                <!-- Dynamically populated -->
                            </select>
                            <div class="mt-3" id="itemDetails" style="display:none;">
                                <p><strong>Item Code:</strong> <span id="itemCode"></span></p>
                                <p><strong>Name:</strong> <span id="itemName"></span></p>
                                <p><strong>Unit Price:</strong> Rs. <span id="itemPrice"></span></p>
                                <p><strong>Available Qty:</strong> <span id="itemStock"></span></p>
                            </div>
                            <div class="mt-3">
                                <label for="itemQty" class="form-label">Purchase Qty</label>
                                <input type="number" id="itemQty" class="form-control" min="1">
                            </div>
                            <div class="mt-3">
                                <label for="itemDiscount" class="form-label">Discount (%)</label>
                                <input type="number" id="itemDiscount" class="form-control" min="0" max="100"
                                       step="0.01" placeholder="Enter discount">
                            </div>
                            <div class="mt-3 text-end">
                                <button class="btn btn-secondary me-2" id="btnResetItem" style="display:none;">
                                    <i class="bi bi-arrow-counterclockwise me-1"></i>Reset
                                </button>
                                <button class="btn btn-success" id="btnAddItem">
                                    <i class="bi bi-cart-plus me-1"></i>Add to Cart
                                </button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <!-- Selected Items Table -->
            <div class="card mt-4">
                <div class="card-header bg-secondary text-white">
                    <i class="bi bi-list-ul me-2"></i>Order Summary
                </div>
                <div class="card-body">
                    <table class="table table-bordered table-striped summary-table">
                        <thead>
                        <tr>
                            <th>Item Code</th>
                            <th>Name</th>
                            <th>Qty</th>
                            <th>Unit Price</th>
                            <th>Discount (%)</th>
                            <th>Total</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody id="orderTableBody">
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="4" class="text-end"><strong>Grand Total:</strong></td>
                            <td colspan="2" id="grandTotal">0.00</td>
                        </tr>
                        </tfoot>
                    </table>
                </div>
            </div>

            <!-- Place Order Button -->
            <div class="mt-3 text-end">
                <button id="btnResetOrder" class="btn btn-outline-danger">Reset Order</button>
                <button id="btnPlaceOrder" class="btn btn-success">Place Order</button>
            </div>
        </div>

        <!-- Manage Orders Section -->
        <div id="order-content" class="mt-4">
            <h2 class="mb-4">üìã Order Management</h2>

            <!-- Customer Selection -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <i class="bi bi-person-fill me-2"></i>Select Customer
                        </div>
                        <div class="card-body">
                            <label for="selectOrderCustomer" class="form-label">Customer</label>
                            <select id="selectOrderCustomer" class="form-control select2">
                                <option></option>
                                <!-- data will be dynamically populated here...-->
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Orders Table -->
            <div class="card mb-4">
                <div class="card-header bg-secondary text-white">
                    <i class="bi bi-list-ul me-2"></i>Customer Orders
                </div>
                <div class="card-body">

                    <!-- filters -->
                    <div class="row g-3 mb-3">
                        <div class="col-md-3">
                            <input type="text" id="searchOrderCode" class="form-control"
                                   placeholder="Search by Order Code">
                        </div>
                        <div class="col-md-2">
                            <input type="date" id="searchOrderDate" class="form-control"
                                   placeholder="Search by Order Date">
                        </div>
                        <div class="col-md-3">
                            <input type="text" id="searchTotalAmount" class="form-control"
                                   placeholder="Search by Total Amount">
                        </div>
                        <div class="col-md-2">
                            <select id="searchOrderStatus" class="form-control">
                                <option value="">All Status</option>
                                <option value="A">Active</option>
                                <option value="I">Inactive</option>
                                <option value="D">Deleted</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select id="searchPaymentStatus" class="form-control">
                                <option value="">All Payment Status</option>
                                <option value="N">Not Paid</option>
                                <option value="P">Pending</option>
                                <option value="A">Paid</option>
                            </select>
                        </div>
                    </div>
                    <div class="row g-3 mb-3">
                        <div class="col-md-3 d-flex align-items-end">
                            <button id="btn-reset-order-filters" class="btn btn-outline-secondary w-100">Reset
                                Filters
                            </button>
                        </div>
                    </div>

                    <div class="orders-table-container">
                        <table class="table table-bordered table-hover table-striped">
                            <thead class="table-dark">
                            <tr>
                                <th>Order Code</th>
                                <th>Order Date</th>
                                <th>Total Amount</th>
                                <th>Total Discount</th>
                                <th>Status</th>
                                <th>Payment Status</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody id="manageOrderTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Order Edit Form -->
            <div class="card" id="orderEditForm" style="display: none;">
                <div class="card-header bg-warning text-dark">
                    <i class="bi bi-pencil-fill me-2"></i>Edit Order
                </div>
                <div class="card-body">
                    <form id="updateOrderForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editOrderCode" class="form-label">Order Code</label>
                                    <input type="text" class="form-control" id="editOrderCode" readonly>
                                </div>
                                <div class="mb-3">
                                    <label for="editOrderDate" class="form-label">Order Date</label>
                                    <input type="datetime-local" class="form-control" id="editOrderDate">
                                </div>
                                <div class="mb-3">
                                    <label for="editTotalAmount" class="form-label">Total Amount</label>
                                    <input type="number" step="0.01" class="form-control" id="editTotalAmount">
                                </div>
                                <div class="mb-3">
                                    <label for="editTotalDiscount" class="form-label">Total Discount</label>
                                    <input type="number" step="0.01" class="form-control" id="editTotalDiscount">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editPaymentStatus" class="form-label">Payment Status</label>
                                    <select class="form-control" id="editPaymentStatus">
                                        <option value="N">Not Paid</option>
                                        <option value="P">Pending</option>
                                        <option value="A">Paid</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-warning">Update Order</button>
                            <button type="button" class="btn btn-secondary" id="btnCancelOrderEdit">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Reports Section -->
        <div id="reports-content" class="mt-4">
            <h2 class="mb-4">üìä Reports & Analytics</h2>

            <!-- Filter Section -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <i class="bi bi-funnel-fill me-2"></i>Report Filters
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <label class="form-label">Customer</label>
                            <select id="reportCustomerFilter" class="form-control select2">
                                <option value="">All Customers</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Order ID</label>
                            <input type="text" id="reportOrderFilter" class="form-control"
                                   placeholder="Search Order ID">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Item</label>
                            <select id="reportItemFilter" class="form-control select2">
                                <option value="">All Items</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Status</label>
                            <select id="reportStatusFilter" class="form-control">
                                <option value="">All Status</option>
                                <option value="A">Active</option>
                                <option value="I">Inactive</option>
                                <option value="D">Deleted</option>
                            </select>
                        </div>
                    </div>
                    <div class="row g-3 mt-2">
                        <div class="col-md-3">
                            <label class="form-label">Payment Status</label>
                            <select id="reportPaymentFilter" class="form-control">
                                <option value="">All Payment Status</option>
                                <option value="N">Not Paid</option>
                                <option value="P">Pending</option>
                                <option value="A">Paid</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Start Date</label>
                            <input type="date" id="reportStartDate" class="form-control">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">End Date</label>
                            <input type="date" id="reportEndDate" class="form-control">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Report Type</label>
                            <select id="reportTimeType" class="form-control">
                                <option value="DAILY">Daily</option>
                                <option value="MONTHLY">Monthly</option>
                                <option value="ANNUAL">Annual</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-12">
                            <button id="btnGenerateReport" class="btn btn-primary me-2">
                                <i class="bi bi-play-fill"></i> Generate Report
                            </button>
                            <button id="btnGenerateTimeReport" class="btn btn-info me-2">
                                <i class="bi bi-calendar3"></i> Time-Based Report
                            </button>
                            <button id="btnClearFilters" class="btn btn-outline-secondary">
                                <i class="bi bi-arrow-clockwise"></i> Clear Filters
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summary Cards -->
            <div class="row g-4 mb-4" id="reportSummaryCards" style="display: none;">
                <div class="col-md-3">
                    <div class="card bg-primary text-white">
                        <div class="card-body">
                            <h5>Total Orders</h5>
                            <h3 id="summaryTotalOrders">0</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-success text-white">
                        <div class="card-body">
                            <h5>Total Revenue</h5>
                            <h3 id="summaryTotalRevenue">Rs. 0.00</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-warning text-dark">
                        <div class="card-body">
                            <h5>Total Discounts</h5>
                            <h3 id="summaryTotalDiscounts">Rs. 0.00</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-info text-white">
                        <div class="card-body">
                            <h5>Avg Order Value</h5>
                            <h3 id="summaryAvgOrderValue">Rs. 0.00</h3>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Table -->
            <div class="card" id="reportsTableCard" style="display: none;">
                <div class="card-header bg-secondary text-white">
                    <i class="bi bi-table me-2"></i>Report Results
                </div>
                <div class="card-body">
                    <div class="reports-table-container">
                        <table class="table table-bordered table-hover table-striped">
                            <thead class="table-dark" id="reportsTableHead">
                            </thead>
                            <tbody id="reportsTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Help Section -->
        <div id="help-content" class="mt-4">
            <h2 class="mb-4">‚ùì Help & Support</h2>

            <!-- Help Navigation Tabs -->
            <ul class="nav nav-tabs mb-4" id="helpTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="user-guide-tab" data-bs-toggle="tab"
                            data-bs-target="#user-guide" type="button" role="tab">
                        <i class="bi bi-book me-2"></i>User Guide
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="faq-tab" data-bs-toggle="tab" data-bs-target="#faq" type="button"
                            role="tab">
                        <i class="bi bi-question-circle me-2"></i>FAQ
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="system-info-tab" data-bs-toggle="tab" data-bs-target="#system-info"
                            type="button" role="tab">
                        <i class="bi bi-info-circle me-2"></i>System Info
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact"
                            type="button" role="tab">
                        <i class="bi bi-envelope me-2"></i>Contact Support
                    </button>
                </li>
            </ul>

            <!-- Help Tab Content -->
            <div class="tab-content" id="helpTabContent">

                <!-- User Guide Tab -->
                <div class="tab-pane fade show active" id="user-guide" role="tabpanel">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="accordion" id="userGuideAccordion">

                                <!-- Dashboard Guide -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#dashboardGuide">
                                            <i class="bi bi-speedometer2 me-2"></i>Dashboard Overview
                                        </button>
                                    </h2>
                                    <div id="dashboardGuide" class="accordion-collapse collapse show"
                                         data-bs-parent="#userGuideAccordion">
                                        <div class="accordion-body">
                                            <h5>Dashboard Features:</h5>
                                            <ul>
                                                <li><strong>Statistics Cards:</strong> View total orders, pending
                                                    orders, and total revenue at a glance
                                                </li>
                                                <li><strong>Top Selling Items:</strong> See which products are
                                                    performing best
                                                </li>
                                                <li><strong>Most Visited Customers:</strong> Identify your most valuable
                                                    customers
                                                </li>
                                                <li><strong>Quick Actions:</strong> Access frequently used functions
                                                    directly from dashboard
                                                </li>
                                            </ul>
                                            <div class="alert alert-info">
                                                <i class="bi bi-lightbulb me-2"></i>
                                                <strong>Tip:</strong> Dashboard data refreshes automatically when you
                                                navigate to it.
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Customer Management Guide -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#customerGuide">
                                            <i class="bi bi-person-lines-fill me-2"></i>Managing Customers
                                        </button>
                                    </h2>
                                    <div id="customerGuide" class="accordion-collapse collapse"
                                         data-bs-parent="#userGuideAccordion">
                                        <div class="accordion-body">
                                            <h5>Customer Management Features:</h5>
                                            <ul>
                                                <li><strong>Add Customer:</strong> Fill the form and click "Save
                                                    Customer"
                                                </li>
                                                <li><strong>Edit Customer:</strong> Click the edit icon in the customer
                                                    table
                                                </li>
                                                <li><strong>Update Status:</strong> Use the status dropdown to
                                                    activate/deactivate/delete customers
                                                </li>
                                                <li><strong>Search:</strong> Use the search box to find specific
                                                    customers
                                                </li>
                                            </ul>
                                            <div class="alert alert-warning">
                                                <i class="bi bi-exclamation-triangle me-2"></i>
                                                <strong>Note:</strong> Account numbers must be unique and cannot be
                                                changed after creation.
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Item Management Guide -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#itemGuide">
                                            <i class="bi bi-box-seam me-2"></i>Managing Items
                                        </button>
                                    </h2>
                                    <div id="itemGuide" class="accordion-collapse collapse"
                                         data-bs-parent="#userGuideAccordion">
                                        <div class="accordion-body">
                                            <h5>Item Management Features:</h5>
                                            <ul>
                                                <li><strong>Add Item:</strong> Enter item details including code, name,
                                                    price, and quantity
                                                </li>
                                                <li><strong>Update Inventory:</strong> Edit existing items to update
                                                    stock levels
                                                </li>
                                                <li><strong>Price Management:</strong> Update unit prices as needed</li>
                                                <li><strong>Status Control:</strong> Activate, deactivate, or delete
                                                    items
                                                </li>
                                            </ul>
                                            <div class="alert alert-success">
                                                <i class="bi bi-check-circle me-2"></i>
                                                <strong>Best Practice:</strong> Keep item codes consistent and
                                                descriptive for easy identification.
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Order Management Guide -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#orderGuide">
                                            <i class="bi bi-receipt me-2"></i>Order Management
                                        </button>
                                    </h2>
                                    <div id="orderGuide" class="accordion-collapse collapse"
                                         data-bs-parent="#userGuideAccordion">
                                        <div class="accordion-body">
                                            <h5>Order Processing:</h5>
                                            <ul>
                                                <li><strong>Place Order:</strong> Select customer, add items, apply
                                                    discounts
                                                </li>
                                                <li><strong>View Orders:</strong> Monitor all orders with filtering
                                                    options
                                                </li>
                                                <li><strong>Update Status:</strong> Change order status as needed</li>
                                                <li><strong>Generate Bills:</strong> Create PDF bills for completed
                                                    orders
                                                </li>
                                            </ul>
                                            <div class="alert alert-info">
                                                <i class="bi bi-info-circle me-2"></i>
                                                <strong>Workflow:</strong> Order ‚Üí Process ‚Üí Payment ‚Üí Bill Generation
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Reports Guide -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#reportsGuide">
                                            <i class="bi bi-graph-up me-2"></i>Reports & Analytics
                                        </button>
                                    </h2>
                                    <div id="reportsGuide" class="accordion-collapse collapse"
                                         data-bs-parent="#userGuideAccordion">
                                        <div class="accordion-body">
                                            <h5>Report Types:</h5>
                                            <ul>
                                                <li><strong>Detailed Reports:</strong> Complete order information with
                                                    filters
                                                </li>
                                                <li><strong>Time-Based Reports:</strong> Daily, monthly, or annual
                                                    summaries
                                                </li>
                                                <li><strong>Customer Reports:</strong> Filter by specific customers</li>
                                                <li><strong>Item Reports:</strong> Track specific product performance
                                                </li>
                                            </ul>
                                            <h5>Available Filters:</h5>
                                            <ul>
                                                <li>Customer ID</li>
                                                <li>Order ID</li>
                                                <li>Item Code</li>
                                                <li>Date Range</li>
                                                <li>Order Status</li>
                                                <li>Payment Status</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FAQ Tab -->
                <div class="tab-pane fade" id="faq" role="tabpanel">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="accordion" id="faqAccordion">

                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#faq1">
                                            How do I add a new customer?
                                        </button>
                                    </h2>
                                    <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            <ol>
                                                <li>Navigate to "Manage Customers" from the sidebar</li>
                                                <li>Fill in the customer form with required details</li>
                                                <li>Ensure the account number is unique</li>
                                                <li>Click "Save Customer" to add the customer</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#faq2">
                                            How do I update item inventory?
                                        </button>
                                    </h2>
                                    <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            <ol>
                                                <li>Go to "Manage Items"</li>
                                                <li>Find the item in the table and click the edit icon</li>
                                                <li>Update the "Quantity on Hand" field</li>
                                                <li>Click "Update Item" to save changes</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#faq3">
                                            How do I generate a bill for an order?
                                        </button>
                                    </h2>
                                    <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            <ol>
                                                <li>Navigate to "Manage Orders"</li>
                                                <li>Find the completed order in the table</li>
                                                <li>Click the "Generate Bill" button for that order</li>
                                                <li>The PDF bill will be downloaded automatically</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#faq4">
                                            How do I filter reports by date range?
                                        </button>
                                    </h2>
                                    <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            <ol>
                                                <li>Go to the "Reports" section</li>
                                                <li>Set the "Start Date" and "End Date" fields</li>
                                                <li>Choose other filters as needed</li>
                                                <li>Click "Generate Report" to view filtered results</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#faq5">
                                            What do the different order statuses mean?
                                        </button>
                                    </h2>
                                    <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            <ul>
                                                <li><span class="badge bg-success">Active (A)</span> - Order is
                                                    confirmed and being processed
                                                </li>
                                                <li><span class="badge bg-secondary">Inactive (I)</span> - Order is on
                                                    hold or suspended
                                                </li>
                                                <li><span class="badge bg-danger">Deleted (D)</span> - Order has been
                                                    cancelled
                                                </li>
                                            </ul>
                                            <h6 class="mt-3">Payment Status:</h6>
                                            <ul>
                                                <li><span class="badge bg-danger">Not Paid (N)</span> - Payment pending
                                                </li>
                                                <li><span class="badge bg-warning">Pending (P)</span> - Payment
                                                    processing
                                                </li>
                                                <li><span class="badge bg-success">Paid (A)</span> - Payment completed
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#faq6">
                                            How do I apply discounts to orders?
                                        </button>
                                    </h2>
                                    <div id="faq6" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                        <div class="accordion-body">
                                            <ol>
                                                <li>In the "Place Order" section, add items to the cart</li>
                                                <li>Enter the discount percentage in the discount field</li>
                                                <li>The system will automatically calculate the discounted total</li>
                                                <li>Complete the order to apply the discount</li>
                                            </ol>
                                            <div class="alert alert-info">
                                                <i class="bi bi-info-circle me-2"></i>
                                                Discounts are applied to the total order amount, not individual items.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- System Info Tab -->
                <div class="tab-pane fade" id="system-info" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-info text-white">
                                    <i class="bi bi-gear-fill me-2"></i>System Information
                                </div>
                                <div class="card-body">
                                    <table class="table table-borderless">
                                        <tr>
                                            <td><strong>Application Name:</strong></td>
                                            <td>Pahana Edu Bookshop</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Version:</strong></td>
                                            <td>5.0.0</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Technology:</strong></td>
                                            <td>Java EE, MySQL</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Last Updated:</strong></td>
                                            <td id="systemLastUpdated">Loading...</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Database Status:</strong></td>
                                            <td><span id="dbStatus" class="badge bg-success">Connected</span></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-secondary text-white">
                                    <i class="bi bi-shield-check me-2"></i>Security & Permissions
                                </div>
                                <div class="card-body">
                                    <h6>Current User Permissions:</h6>
                                    <ul class="list-unstyled">
                                        <li><i class="bi bi-check-circle text-success me-2"></i>View Dashboard</li>
                                        <li><i class="bi bi-check-circle text-success me-2"></i>Manage Customers</li>
                                        <li><i class="bi bi-check-circle text-success me-2"></i>Manage Items</li>
                                        <li><i class="bi bi-check-circle text-success me-2"></i>Process Orders</li>
                                        <li><i class="bi bi-check-circle text-success me-2"></i>Generate Reports</li>
                                        <li><i class="bi bi-check-circle text-success me-2"></i>Generate Bills</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header bg-warning text-dark">
                                    <i class="bi bi-exclamation-triangle me-2"></i>System Requirements
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6>Minimum Browser Requirements:</h6>
                                            <ul>
                                                <li>Chrome 90+</li>
                                                <li>Firefox 88+</li>
                                                <li>Safari 14+</li>
                                                <li>Edge 90+</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>Required Features:</h6>
                                            <ul>
                                                <li>JavaScript enabled</li>
                                                <li>Cookies enabled</li>
                                                <li>PDF viewer for bill generation</li>
                                                <li>Internet connection for real-time updates</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contact Support Tab -->
                <div class="tab-pane fade" id="contact" role="tabpanel">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <i class="bi bi-envelope me-2"></i>Contact Support
                                </div>
                                <div class="card-body">
                                    <form id="supportForm">
                                        <div class="mb-3">
                                            <label class="form-label">Issue Type</label>
                                            <select class="form-control" id="issueType" required>
                                                <option value="">Select Issue Type</option>
                                                <option value="technical">Technical Issue</option>
                                                <option value="feature">Feature Request</option>
                                                <option value="bug">Bug Report</option>
                                                <option value="training">Training Request</option>
                                                <option value="other">Other</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Priority</label>
                                            <select class="form-control" id="priority" required>
                                                <option value="low">Low</option>
                                                <option value="medium" selected>Medium</option>
                                                <option value="high">High</option>
                                                <option value="urgent">Urgent</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Subject</label>
                                            <input type="text" class="form-control" id="supportSubject" required>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Description</label>
                                            <textarea class="form-control" id="supportDescription" rows="5" required
                                                      placeholder="Please describe your issue in detail..."></textarea>
                                        </div>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="bi bi-send me-2"></i>Submit Support Request
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header bg-success text-white">
                                    <i class="bi bi-telephone me-2"></i>Quick Contact
                                </div>
                                <div class="card-body">
                                    <h6>Support Hours:</h6>
                                    <p>Monday - Friday: 9:00 AM - 6:00 PM<br>
                                        Saturday: 9:00 AM - 2:00 PM<br>
                                        Sunday: Closed</p>

                                    <h6>Contact Information:</h6>
                                    <p>
                                        <i class="bi bi-telephone me-2"></i>+94 76 209 3858<br>
                                        <i class="bi bi-envelope me-2"></i>support@pahanaedu.lk<br>
                                        <i class="bi bi-geo-alt me-2"></i>Gampaha, Sri Lanka
                                    </p>

                                    <div class="alert alert-info">
                                        <i class="bi bi-clock me-2"></i>
                                        <strong>Response Time:</strong><br>
                                        High/Urgent: 2-4 hours<br>
                                        Medium: 24 hours<br>
                                        Low: 48-72 hours
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>

<!--controllers-->
<script src="controller/CommonConfig.js"></script>
<script src="controller/AuthController.js"></script>
<script src="controller/LogoutController.js"></script>
<script src="controller/NotificationService.js"></script>
<script src="controller/Navigation.js"></script>
<script src="controller/DashboardController.js"></script>
<script src="controller/CustomerController.js"></script>
<script src="controller/ItemController.js"></script>
<script src="controller/PlaceOrderController.js"></script>
<script src="controller/ManageOrderController.js"></script>
<script src="controller/ReportsController.js"></script>
<script src="controller/HelpController.js"></script>

<!-- Place Order Confirmation Modal -->
<div class="modal fade" id="placeOrderModal" tabindex="-1" aria-labelledby="placeOrderModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="placeOrderModalLabel">
                    <i class="bi bi-bag-check-fill me-2"></i>Confirm Order
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Order Items Table -->
                <div class="mb-4">
                    <h6 class="mb-3">Order Items</h6>
                    <table class="table table-bordered table-sm">
                        <thead class="table-dark">
                        <tr>
                            <th>Item Code</th>
                            <th>Name</th>
                            <th>Qty</th>
                            <th>Unit Price</th>
                            <th>Discount (%)</th>
                            <th>Total</th>
                        </tr>
                        </thead>
                        <tbody id="modalOrderTableBody">
                        </tbody>
                    </table>
                </div>

                <!-- Totals -->
                <div class="row mb-4">
                    <div class="col-md-6 offset-md-6">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Sub Total:</span>
                                    <span>Rs. <span id="modalSubTotal">0.00</span></span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <strong>Grand Total:</strong>
                                    <strong>Rs. <span id="modalGrandTotal">0.00</span></strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Method -->
                <div class="mb-4">
                    <label for="paymentMethod" class="form-label">Payment Method</label>
                    <select id="paymentMethod" class="form-select">
                        <option value="">Select Payment Method</option>
                        <option value="cash">Cash</option>
                        <option value="card">Card</option>
                        <option value="other">Other</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" id="btnProceedPayment" class="btn btn-success" disabled>
                    <i class="bi bi-credit-card me-1"></i>Proceed to Payment
                </button>
                <button type="button" id="btnPrintBill" class="btn btn-primary" disabled>
                    <i class="bi bi-printer me-1"></i>Print Bill
                </button>
            </div>
        </div>
    </div>
</div>

</body>
</html>
